{"ast":null,"code":"var _jsxFileName = \"/home/n/semantic_map_ui/src/App.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GRID_SIZE = 20;\nexport default function App() {\n  _s();\n  const [gridMap, setGridMap] = useState({});\n  const [mode, setMode] = useState(\"object\"); // object | place | robot\n\n  /* JSON LOAD */\n  useEffect(() => {\n    fetch(\"http://localhost:3001/semantic\").then(res => res.json()).then(data => setGridMap(data.grid || {}));\n  }, []);\n\n  /* GRID CLICK */\n  const handleGridClick = (gx, gy) => {\n    const key = `${gx},${gy}`;\n    const entityType = mode;\n    const id = prompt(`${entityType} id?`);\n    if (!id) return;\n    const label = prompt(\"symbolic label?\");\n    const type = prompt(\"type?\");\n    const newEntity = {\n      id,\n      type,\n      explicit: {\n        grid: {\n          x: gx,\n          y: gy\n        }\n      },\n      implicit: {},\n      symbolic: {\n        label\n      }\n    };\n    setGridMap(prev => {\n      const cell = prev[key] || {\n        objects: [],\n        places: [],\n        robots: []\n      };\n      return {\n        ...prev,\n        [key]: {\n          ...cell,\n          [`${entityType}s`]: [...cell[`${entityType}s`], newEntity]\n        }\n      };\n    });\n  };\n\n  /* SAVE JSON */\n  const saveJSON = () => {\n    fetch(\"http://localhost:3001/semantic\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        grid: gridMap\n      }, null, 2)\n    }).then(() => alert(\"saved\"));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"TOSM Grid Annotation\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setMode(\"object\"),\n        children: \"Object\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setMode(\"place\"),\n        children: \"Place\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setMode(\"robot\"),\n        children: \"Robot\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: saveJSON,\n        children: \"Save\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"grid\",\n        gridTemplateColumns: `repeat(${GRID_SIZE}, 30px)`\n      },\n      children: Array.from({\n        length: GRID_SIZE * GRID_SIZE\n      }).map((_, i) => {\n        const gx = i % GRID_SIZE;\n        const gy = Math.floor(i / GRID_SIZE);\n        const key = `${gx},${gy}`;\n        const hasData = gridMap[key];\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => handleGridClick(gx, gy),\n          style: {\n            width: 30,\n            height: 30,\n            border: \"1px solid #aaa\",\n            background: hasData ? \"#cce5ff\" : \"#fff\",\n            cursor: \"pointer\"\n          }\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"CG7Dc3FyiJBxwpsmvRjoVn8uchQ=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","jsxDEV","_jsxDEV","GRID_SIZE","App","_s","gridMap","setGridMap","mode","setMode","fetch","then","res","json","data","grid","handleGridClick","gx","gy","key","entityType","id","prompt","label","type","newEntity","explicit","x","y","implicit","symbolic","prev","cell","objects","places","robots","saveJSON","method","headers","body","JSON","stringify","alert","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","style","display","gridTemplateColumns","Array","from","length","map","_","i","Math","floor","hasData","width","height","border","background","cursor","_c","$RefreshReg$"],"sources":["/home/n/semantic_map_ui/src/App.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\n\nconst GRID_SIZE = 20;\n\nexport default function App() {\n  const [gridMap, setGridMap] = useState({});\n  const [mode, setMode] = useState(\"object\"); // object | place | robot\n\n  /* JSON LOAD */\n  useEffect(() => {\n    fetch(\"http://localhost:3001/semantic\")\n      .then(res => res.json())\n      .then(data => setGridMap(data.grid || {}));\n  }, []);\n\n  /* GRID CLICK */\n  const handleGridClick = (gx, gy) => {\n    const key = `${gx},${gy}`;\n\n    const entityType = mode;\n\n    const id = prompt(`${entityType} id?`);\n    if (!id) return;\n\n    const label = prompt(\"symbolic label?\");\n    const type = prompt(\"type?\");\n\n    const newEntity = {\n      id,\n      type,\n\n      explicit: {\n        grid: { x: gx, y: gy }\n      },\n\n      implicit: {},\n\n      symbolic: {\n        label\n      }\n    };\n\n    setGridMap(prev => {\n      const cell = prev[key] || {\n        objects: [],\n        places: [],\n        robots: []\n      };\n\n      return {\n        ...prev,\n        [key]: {\n          ...cell,\n          [`${entityType}s`]: [...cell[`${entityType}s`], newEntity]\n        }\n      };\n    });\n  };\n\n  /* SAVE JSON */\n  const saveJSON = () => {\n    fetch(\"http://localhost:3001/semantic\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ grid: gridMap }, null, 2)\n    }).then(() => alert(\"saved\"));\n  };\n\n  return (\n    <div>\n      <h3>TOSM Grid Annotation</h3>\n\n      <div>\n        <button onClick={() => setMode(\"object\")}>Object</button>\n        <button onClick={() => setMode(\"place\")}>Place</button>\n        <button onClick={() => setMode(\"robot\")}>Robot</button>\n        <button onClick={saveJSON}>Save</button>\n      </div>\n\n      <div style={{ display: \"grid\", gridTemplateColumns: `repeat(${GRID_SIZE}, 30px)` }}>\n        {Array.from({ length: GRID_SIZE * GRID_SIZE }).map((_, i) => {\n          const gx = i % GRID_SIZE;\n          const gy = Math.floor(i / GRID_SIZE);\n          const key = `${gx},${gy}`;\n          const hasData = gridMap[key];\n\n          return (\n            <div\n              key={i}\n              onClick={() => handleGridClick(gx, gy)}\n              style={{\n                width: 30,\n                height: 30,\n                border: \"1px solid #aaa\",\n                background: hasData ? \"#cce5ff\" : \"#fff\",\n                cursor: \"pointer\"\n              }}\n            />\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}