{"ast":null,"code":"var _jsxFileName = \"/home/n/semantic_map_ui/src/App.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\n\n/* ===== MAP PARAMS ===== */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GRID_SIZE = 40;\nconst MAP_SIZE = 800;\nconst GRID_COUNT = MAP_SIZE / GRID_SIZE;\n\n/* ===== MAIN ===== */\nfunction App() {\n  _s();\n  const [mode, setMode] = useState(\"place\"); // place | object\n  const [gridMap, setGridMap] = useState({});\n\n  /* ===== JSON LOAD ===== */\n  useEffect(() => {\n    fetch(\"/semantic_grid_map.json\").then(res => res.ok ? res.json() : null).then(data => {\n      if (data !== null && data !== void 0 && data.grid) setGridMap(data.grid);\n    }).catch(() => console.log(\"no json\"));\n  }, []);\n\n  /* ===== GRID CLICK ===== */\n  const handleGridClick = (gx, gy) => {\n    const key = `${gx},${gy}`;\n    setGridMap(prev => {\n      const cell = prev[key] || {\n        places: [],\n        objects: [],\n        robots: []\n      };\n      if (mode === \"place\") {\n        const name = prompt(\"place name?\");\n        if (!name) return prev;\n        return {\n          ...prev,\n          [key]: {\n            ...cell,\n            places: [...cell.places, {\n              id: name,\n              type: \"place\",\n              explicit: {\n                grid: {\n                  x: gx,\n                  y: gy\n                }\n              },\n              implicit: {},\n              symbolic: {\n                label: name\n              }\n            }]\n          }\n        };\n      }\n      if (mode === \"object\") {\n        if (cell.places.length === 0) {\n          alert(\"place 먼저 지정해야 함\");\n          return prev;\n        }\n        const id = prompt(\"object id?\");\n        const type = prompt(\"object type?\");\n        if (!id || !type) return prev;\n        return {\n          ...prev,\n          [key]: {\n            ...cell,\n            objects: [...cell.objects, {\n              id,\n              type,\n              explicit: {\n                grid: {\n                  x: gx,\n                  y: gy\n                }\n              },\n              implicit: {},\n              symbolic: {\n                label: type\n              }\n            }]\n          }\n        };\n      }\n      return prev;\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: \"flex\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: MAP_SIZE,\n        height: MAP_SIZE,\n        backgroundImage: \"url('/map.png')\",\n        backgroundSize: `${MAP_SIZE}px ${MAP_SIZE}px`,\n        backgroundRepeat: \"no-repeat\",\n        position: \"relative\",\n        border: \"1px solid black\"\n      },\n      onClick: e => {\n        const rect = e.currentTarget.getBoundingClientRect();\n        const gx = Math.floor((e.clientX - rect.left) / GRID_SIZE);\n        const gy = Math.floor((e.clientY - rect.top) / GRID_SIZE);\n        handleGridClick(gx, gy);\n      },\n      children: [[...Array(GRID_COUNT)].map((_, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: \"absolute\",\n          left: i * GRID_SIZE,\n          top: 0,\n          width: 1,\n          height: \"100%\",\n          background: \"rgba(0,0,0,0.2)\"\n        }\n      }, `v${i}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }, this)), [...Array(GRID_COUNT)].map((_, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: \"absolute\",\n          top: i * GRID_SIZE,\n          left: 0,\n          height: 1,\n          width: \"100%\",\n          background: \"rgba(0,0,0,0.2)\"\n        }\n      }, `h${i}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }, this)), Object.entries(gridMap).map(([key, val]) => {\n        if (!val.places.length) return null;\n        const [gx, gy] = key.split(\",\").map(Number);\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: \"absolute\",\n            left: gx * GRID_SIZE,\n            top: gy * GRID_SIZE,\n            width: GRID_SIZE,\n            height: GRID_SIZE,\n            background: \"rgba(0,255,0,0.25)\",\n            pointerEvents: \"none\"\n          }\n        }, key, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 13\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginLeft: 20,\n        width: 400\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Mode\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setMode(\"place\"),\n        children: \"Place\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setMode(\"object\"),\n        children: \"Object\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n        style: {\n          height: 600,\n          overflow: \"auto\"\n        },\n        children: JSON.stringify({\n          grid: gridMap\n        }, null, 2)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"fZpX0TK9tPYdvPSpyrALfHd2y7Y=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","jsxDEV","_jsxDEV","GRID_SIZE","MAP_SIZE","GRID_COUNT","App","_s","mode","setMode","gridMap","setGridMap","fetch","then","res","ok","json","data","grid","catch","console","log","handleGridClick","gx","gy","key","prev","cell","places","objects","robots","name","prompt","id","type","explicit","x","y","implicit","symbolic","label","length","alert","style","display","children","width","height","backgroundImage","backgroundSize","backgroundRepeat","position","border","onClick","e","rect","currentTarget","getBoundingClientRect","Math","floor","clientX","left","clientY","top","Array","map","_","i","background","fileName","_jsxFileName","lineNumber","columnNumber","Object","entries","val","split","Number","pointerEvents","marginLeft","overflow","JSON","stringify","_c","$RefreshReg$"],"sources":["/home/n/semantic_map_ui/src/App.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\n\n/* ===== MAP PARAMS ===== */\nconst GRID_SIZE = 40;\nconst MAP_SIZE = 800;\nconst GRID_COUNT = MAP_SIZE / GRID_SIZE;\n\n/* ===== MAIN ===== */\nfunction App() {\n  const [mode, setMode] = useState(\"place\"); // place | object\n  const [gridMap, setGridMap] = useState({});\n\n  /* ===== JSON LOAD ===== */\n  useEffect(() => {\n    fetch(\"/semantic_grid_map.json\")\n      .then(res => res.ok ? res.json() : null)\n      .then(data => {\n        if (data?.grid) setGridMap(data.grid);\n      })\n      .catch(() => console.log(\"no json\"));\n  }, []);\n\n  /* ===== GRID CLICK ===== */\n  const handleGridClick = (gx, gy) => {\n    const key = `${gx},${gy}`;\n\n    setGridMap(prev => {\n      const cell = prev[key] || {\n        places: [],\n        objects: [],\n        robots: []\n      };\n\n      if (mode === \"place\") {\n        const name = prompt(\"place name?\");\n        if (!name) return prev;\n\n        return {\n          ...prev,\n          [key]: {\n            ...cell,\n            places: [\n              ...cell.places,\n              {\n                id: name,\n                type: \"place\",\n                explicit: { grid: { x: gx, y: gy } },\n                implicit: {},\n                symbolic: { label: name }\n              }\n            ]\n          }\n        };\n      }\n\n      if (mode === \"object\") {\n        if (cell.places.length === 0) {\n          alert(\"place 먼저 지정해야 함\");\n          return prev;\n        }\n\n        const id = prompt(\"object id?\");\n        const type = prompt(\"object type?\");\n        if (!id || !type) return prev;\n\n        return {\n          ...prev,\n          [key]: {\n            ...cell,\n            objects: [\n              ...cell.objects,\n              {\n                id,\n                type,\n                explicit: { grid: { x: gx, y: gy } },\n                implicit: {},\n                symbolic: { label: type }\n              }\n            ]\n          }\n        };\n      }\n\n      return prev;\n    });\n  };\n\n  return (\n    <div style={{ display: \"flex\" }}>\n      {/* MAP */}\n      <div\n        style={{\n          width: MAP_SIZE,\n          height: MAP_SIZE,\n          backgroundImage: \"url('/map.png')\",\n          backgroundSize: `${MAP_SIZE}px ${MAP_SIZE}px`,\n          backgroundRepeat: \"no-repeat\",\n          position: \"relative\",\n          border: \"1px solid black\"\n        }}\n        onClick={e => {\n          const rect = e.currentTarget.getBoundingClientRect();\n          const gx = Math.floor((e.clientX - rect.left) / GRID_SIZE);\n          const gy = Math.floor((e.clientY - rect.top) / GRID_SIZE);\n          handleGridClick(gx, gy);\n        }}\n      >\n        {/* GRID */}\n        {[...Array(GRID_COUNT)].map((_, i) => (\n          <div key={`v${i}`} style={{\n            position: \"absolute\",\n            left: i * GRID_SIZE,\n            top: 0,\n            width: 1,\n            height: \"100%\",\n            background: \"rgba(0,0,0,0.2)\"\n          }} />\n        ))}\n        {[...Array(GRID_COUNT)].map((_, i) => (\n          <div key={`h${i}`} style={{\n            position: \"absolute\",\n            top: i * GRID_SIZE,\n            left: 0,\n            height: 1,\n            width: \"100%\",\n            background: \"rgba(0,0,0,0.2)\"\n          }} />\n        ))}\n\n        {/* PLACE VIS */}\n        {Object.entries(gridMap).map(([key, val]) => {\n          if (!val.places.length) return null;\n          const [gx, gy] = key.split(\",\").map(Number);\n          return (\n            <div key={key} style={{\n              position: \"absolute\",\n              left: gx * GRID_SIZE,\n              top: gy * GRID_SIZE,\n              width: GRID_SIZE,\n              height: GRID_SIZE,\n              background: \"rgba(0,255,0,0.25)\",\n              pointerEvents: \"none\"\n            }} />\n          );\n        })}\n      </div>\n\n      {/* PANEL */}\n      <div style={{ marginLeft: 20, width: 400 }}>\n        <h3>Mode</h3>\n        <button onClick={() => setMode(\"place\")}>Place</button>\n        <button onClick={() => setMode(\"object\")}>Object</button>\n\n        <pre style={{ height: 600, overflow: \"auto\" }}>\n{JSON.stringify({ grid: gridMap }, null, 2)}\n        </pre>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}