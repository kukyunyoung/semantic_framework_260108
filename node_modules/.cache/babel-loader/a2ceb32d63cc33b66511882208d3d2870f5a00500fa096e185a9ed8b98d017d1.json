{"ast":null,"code":"var _jsxFileName = \"/home/n/semantic_map_ui/src/App.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState, useRef } from 'react';\n\n/* ===== MAP PARAMS ===== */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GRID_SIZE = 20;\nconst MAP_SIZE = 800;\nconst GRID_COUNT = MAP_SIZE / GRID_SIZE;\nfunction App() {\n  _s();\n  const [mode, setMode] = useState('place'); // place | object\n  const [gridMap, setGridMap] = useState({});\n  const [selectedCells, setSelectedCells] = useState([]);\n  const [isDragging, setIsDragging] = useState(false);\n  const draggedRef = useRef(false);\n  const [coordMode, setCoordMode] = useState(false); // Ï¢åÌëúÏßÄÏ†ï Î™®Îìú\n  const [coordStep, setCoordStep] = useState('IDLE'); // Ï¢åÌëúÏßÄÏ†ï Îã®Í≥Ñ\n  const [coordPoints, setCoordPoints] = useState([]); // {gx, gy, x, y}\n\n  /* ===== JSON LOAD ===== */\n  useEffect(() => {\n    fetch('/semantic_grid_map.json').then(res => res.ok ? res.json() : null).then(data => {\n      if (data !== null && data !== void 0 && data.grid) setGridMap(data.grid);\n    }).catch(() => console.log('no json'));\n  }, []);\n  useEffect(() => {\n    if (coordStep === 'COLLECT' && gridPoints.length === 5) {\n      setCoordStep('INPUT');\n    }\n  }, [gridPoints, coordStep]);\n  useEffect(() => {\n    if (coordStep !== 'INPUT') return;\n    const inputWorldCoords = async () => {\n      const labels = ['Ï§ëÏã¨ Ï¢åÌëú (0,0)', 'ÏôºÏ™Ω ÏúÑ', 'Ïò§Î•∏Ï™Ω ÏúÑ', 'ÏôºÏ™Ω ÏïÑÎûò', 'Ïò§Î•∏Ï™Ω ÏïÑÎûò'];\n      const result = [];\n      for (let i = 0; i < 5; i++) {\n        const x = Number(prompt(`${labels[i]} - world X Ï¢åÌëú`));\n        const y = Number(prompt(`${labels[i]} - world Y Ï¢åÌëú`));\n        if (isNaN(x) || isNaN(y)) {\n          alert('Ïà´ÏûêÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî');\n          i--;\n          continue;\n        }\n        result.push({\n          x,\n          y\n        });\n      }\n      setWorldPoints(result);\n      setCoordStep('IDLE');\n      setCoordMode(false);\n      alert('Ï¢åÌëú ÏûÖÎ†• ÏôÑÎ£å');\n    };\n    inputWorldCoords();\n  }, [coordStep]);\n  useEffect(() => {\n    if (coordStep !== 'APPLY') return;\n    const [origin, lt, rt, lb] = coordPoints;\n    const gridW = rt.gx - lt.gx;\n    const gridH = lb.gy - lt.gy;\n    const worldW = rt.x - lt.x;\n    const worldH = lb.y - lt.y;\n    const dx = worldW / gridW;\n    const dy = worldH / gridH;\n    setGridMap(prev => {\n      const updated = {\n        ...prev\n      };\n      Object.keys(updated).forEach(key => {\n        const [gx, gy] = key.split(',').map(Number);\n        const wx = lt.x + (gx - lt.gx) * dx;\n        const wy = lt.y + (gy - lt.gy) * dy;\n        updated[key] = {\n          ...updated[key],\n          explicit: {\n            grid: {\n              gx,\n              gy\n            },\n            world: {\n              x: +wx.toFixed(3),\n              y: +wy.toFixed(3)\n            }\n          }\n        };\n      });\n      return updated;\n    });\n    setCoordStep('IDLE');\n    alert('Ï¢åÌëú Îß§Ìïë ÏôÑÎ£å');\n  }, [coordStep]);\n\n  /* ===== GRID SORT (y desc ‚Üí x desc) ===== */\n  const sortGridDesc = grid => {\n    return Object.fromEntries(Object.entries(grid).sort(([a], [b]) => {\n      const [ax, ay] = a.split(',').map(Number);\n      const [bx, by] = b.split(',').map(Number);\n      if (ay !== by) return by - ay;\n      return bx - ax;\n    }));\n  };\n\n  /* ===== JSON SAVE ===== */\n  const saveJSON = () => {\n    const sortedGrid = sortGridDesc(gridMap);\n    const blob = new Blob([JSON.stringify({\n      grid: sortedGrid\n    }, null, 2)], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = 'semantic_grid_map.json';\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n  const applyGridCoordinates = () => {\n    if (coordPoints.length !== 5) {\n      alert('Ï¢åÌëúÎäî Ï†ïÌôïÌûà 5Í∞ú Ï∞çÏñ¥Ïïº Ìï©ÎãàÎã§');\n      return;\n    }\n    const [origin, lt, rt, lb, rb] = coordPoints;\n\n    // grid Í∏∞Ï§Ä Ìè≠/ÎÜíÏù¥\n    const gridWidth = rt.gx - lt.gx;\n    const gridHeight = lb.gy - lt.gy;\n\n    // Ïã§Ï†ú Ï¢åÌëú Í∏∞Ï§Ä Ìè≠/ÎÜíÏù¥\n    const worldWidth = rt.x - lt.x;\n    const worldHeight = lb.y - lt.y;\n    const dx = worldWidth / gridWidth;\n    const dy = worldHeight / gridHeight;\n    setGridMap(prev => {\n      const updated = {\n        ...prev\n      };\n      Object.keys(updated).forEach(key => {\n        const [gx, gy] = key.split(',').map(Number);\n        const wx = lt.x + (gx - lt.gx) * dx;\n        const wy = lt.y + (gy - lt.gy) * dy;\n        updated[key] = {\n          ...updated[key],\n          explicit: {\n            ...(updated[key].explicit || {}),\n            world: {\n              x: Number(wx.toFixed(3)),\n              y: Number(wy.toFixed(3))\n            }\n          }\n        };\n      });\n      return updated;\n    });\n    setCoordPoints([]);\n  };\n\n  /* ===== GRID CLICK (ÏÑ†ÌÉùÎßå Îã¥Îãπ) ===== */\n  const handleGridClick = (gx, gy) => {\n    const exists = selectedCells.some(c => c.x === gx && c.y === gy);\n    if (exists) {\n      setSelectedCells(prev => prev.filter(c => !(c.x === gx && c.y === gy)));\n    } else {\n      setSelectedCells(prev => [...prev, {\n        x: gx,\n        y: gy\n      }]);\n    }\n  };\n  const addSelectedCell = (gx, gy) => {\n    setSelectedCells(prev => {\n      if (prev.some(c => c.x === gx && c.y === gy)) return prev;\n      return [...prev, {\n        x: gx,\n        y: gy\n      }];\n    });\n  };\n\n  /* ===== APPLY PLACE ===== */\n  const applyPlaceToSelected = () => {\n    if (selectedCells.length === 0) return;\n    const name = prompt('place name?');\n    const relation = prompt('relation?');\n    if (!name) return;\n    setGridMap(prev => {\n      const updated = {\n        ...prev\n      };\n      selectedCells.forEach(({\n        x,\n        y\n      }) => {\n        const key = `${x},${y}`;\n        const cell = updated[key] || {\n          places: [],\n          objects: [],\n          robots: []\n        };\n        updated[key] = {\n          ...cell,\n          places: [{\n            id: name,\n            type: 'place',\n            explicit: {\n              grid: {\n                x,\n                y\n              }\n            },\n            implicit: {\n              relation: relation || 'none'\n            },\n            symbolic: {\n              label: name\n            }\n          }] // ‚úÖ ÎçÆÏñ¥Ïì∞Í∏∞\n        };\n      });\n      return updated;\n    });\n    setSelectedCells([]);\n  };\n\n  /* ===== APPLY OBJECT ===== */\n  const applyObjectToSelected = () => {\n    if (selectedCells.length === 0) return;\n    const id = prompt('object id?');\n    const type = prompt('object type?');\n    const relation = prompt('relation?');\n    if (!id || !type) return;\n    setGridMap(prev => {\n      const updated = {\n        ...prev\n      };\n      selectedCells.forEach(({\n        x,\n        y\n      }) => {\n        const key = `${x},${y}`;\n        const cell = updated[key];\n        if (!cell || cell.places.length === 0) return;\n        updated[key] = {\n          ...cell,\n          objects: [{\n            id,\n            type,\n            explicit: {\n              grid: {\n                x,\n                y\n              }\n            },\n            implicit: {\n              relation: relation || 'none'\n            },\n            symbolic: {\n              label: type\n            }\n          }] // ‚úÖ ÎçÆÏñ¥Ïì∞Í∏∞\n        };\n      });\n      return updated;\n    });\n    setSelectedCells([]);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: MAP_SIZE,\n        height: MAP_SIZE,\n        backgroundImage: \"url('/map.png')\",\n        backgroundSize: `${MAP_SIZE}px ${MAP_SIZE}px`,\n        backgroundRepeat: 'no-repeat',\n        position: 'relative',\n        border: '1px solid black'\n      },\n      onMouseDown: e => {\n        draggedRef.current = false;\n        setIsDragging(true);\n        const rect = e.currentTarget.getBoundingClientRect();\n        const gx = Math.floor((e.clientX - rect.left) / GRID_SIZE);\n        const gy = Math.floor((e.clientY - rect.top) / GRID_SIZE);\n        addSelectedCell(gx, gy);\n      },\n      onMouseMove: e => {\n        if (!isDragging) return;\n        draggedRef.current = true; // ‚≠ê ÎìúÎûòÍ∑∏ Î∞úÏÉù Í∏∞Î°ù\n\n        const rect = e.currentTarget.getBoundingClientRect();\n        const gx = Math.floor((e.clientX - rect.left) / GRID_SIZE);\n        const gy = Math.floor((e.clientY - rect.top) / GRID_SIZE);\n        addSelectedCell(gx, gy);\n      },\n      onMouseUp: e => {\n        setIsDragging(false);\n        const rect = e.currentTarget.getBoundingClientRect();\n        const gx = Math.floor((e.clientX - rect.left) / GRID_SIZE);\n        const gy = Math.floor((e.clientY - rect.top) / GRID_SIZE);\n        if (!draggedRef.current) {\n          handleGridClick(gx, gy);\n\n          // ‚≠ê ÌÅ¥Î¶≠ ÏàòÏßë Îã®Í≥Ñ\n          if (coordStep === 'COLLECT' && !draggedRef.current) {\n            setCoordPoints(prev => {\n              if (prev.length >= 5) return prev;\n              return [...prev, {\n                gx,\n                gy\n              }];\n            });\n          }\n        }\n      },\n      onMouseLeave: () => {\n        setIsDragging(false);\n        draggedRef.current = false;\n      },\n      children: [[...Array(GRID_COUNT)].map((_, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'absolute',\n          left: i * GRID_SIZE,\n          top: 0,\n          width: 1,\n          height: '100%',\n          background: 'rgba(0,0,0,0.2)'\n        }\n      }, `v${i}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 21\n      }, this)), [...Array(GRID_COUNT)].map((_, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'absolute',\n          top: i * GRID_SIZE,\n          left: 0,\n          height: 1,\n          width: '100%',\n          background: 'rgba(0,0,0,0.2)'\n        }\n      }, `h${i}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 21\n      }, this)), Object.entries(gridMap).map(([key, val]) => {\n        if (!val.places || val.places.length === 0) return null;\n        const [gx, gy] = key.split(',').map(Number);\n        const place = val.places[0]; // ÌòÑÏû¨ ÏÖÄÏùò ÎåÄÌëú place\n        const hasObject = val.objects && val.objects.length > 0;\n        const isPath = place.id === 'path';\n        const isWall = place.id === 'wall';\n        let bgColor = 'rgba(255,255,255,0.0)';\n        if (isPath) {\n          bgColor = 'rgba(0,255,0,0.25)'; // üü¢\n        } else if (hasObject || isWall) {\n          bgColor = 'rgba(255,0,0,0.25)'; // üî¥\n        } else if (!hasObject) {\n          bgColor = 'rgba(255,255,0,0.35)'; // üü°\n        }\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            left: gx * GRID_SIZE,\n            top: gy * GRID_SIZE,\n            width: GRID_SIZE,\n            height: GRID_SIZE,\n            background: bgColor,\n            pointerEvents: 'none'\n          }\n        }, key, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 25\n        }, this);\n      }), selectedCells.map(({\n        x,\n        y\n      }) => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'absolute',\n          left: x * GRID_SIZE,\n          top: y * GRID_SIZE,\n          width: GRID_SIZE,\n          height: GRID_SIZE,\n          background: 'rgba(0,0,255,0.35)',\n          pointerEvents: 'none'\n        }\n      }, `sel-${x},${y}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 21\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginLeft: 20,\n        width: 420\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Mode\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setMode('place'),\n        children: \"Place\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setMode('object'),\n        children: \"Object\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: mode === 'place' ? applyPlaceToSelected : applyObjectToSelected,\n        children: \"Apply to Selected Cells\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: saveJSON,\n        style: {\n          marginLeft: 10\n        },\n        children: \"Save JSON\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 440,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          setCoordPoints([]);\n          setCoordStep('COLLECT');\n          alert('Ï§ëÏã¨ ‚Üí Ï¢åÏÉÅ ‚Üí Ïö∞ÏÉÅ ‚Üí Ï¢åÌïò ‚Üí Ïö∞Ìïò ÏàúÏÑúÎ°ú 5Ï†ê ÌÅ¥Î¶≠');\n        },\n        children: \"Start Coordinate Mapping\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          if (coordPoints.length !== 5) {\n            alert('Ï†ê 5Í∞úÎ•º Î®ºÏ†Ä Ï∞çÏúºÏÑ∏Ïöî');\n            return;\n          }\n          const labels = ['Ï§ëÏã¨ (0,0)', 'ÏôºÏ™Ω ÏúÑ', 'Ïò§Î•∏Ï™Ω ÏúÑ', 'ÏôºÏ™Ω ÏïÑÎûò', 'Ïò§Î•∏Ï™Ω ÏïÑÎûò'];\n          const completed = coordPoints.map((p, i) => {\n            const x = Number(prompt(`${labels[i]} X`));\n            const y = Number(prompt(`${labels[i]} Y`));\n            return {\n              ...p,\n              x,\n              y\n            };\n          });\n          setCoordPoints(completed);\n          setCoordStep('APPLY');\n        },\n        children: \"Apply Grid Coordinates\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n        style: {\n          height: 600,\n          overflow: 'auto'\n        },\n        children: JSON.stringify({\n          grid: gridMap\n        }, null, 2)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 280,\n    columnNumber: 9\n  }, this);\n}\n_s(App, \"D8P5/XiH7zz7eJ9Hugb/9iO422o=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","useRef","jsxDEV","_jsxDEV","GRID_SIZE","MAP_SIZE","GRID_COUNT","App","_s","mode","setMode","gridMap","setGridMap","selectedCells","setSelectedCells","isDragging","setIsDragging","draggedRef","coordMode","setCoordMode","coordStep","setCoordStep","coordPoints","setCoordPoints","fetch","then","res","ok","json","data","grid","catch","console","log","gridPoints","length","inputWorldCoords","labels","result","i","x","Number","prompt","y","isNaN","alert","push","setWorldPoints","origin","lt","rt","lb","gridW","gx","gridH","gy","worldW","worldH","dx","dy","prev","updated","Object","keys","forEach","key","split","map","wx","wy","explicit","world","toFixed","sortGridDesc","fromEntries","entries","sort","a","b","ax","ay","bx","by","saveJSON","sortedGrid","blob","Blob","JSON","stringify","type","url","URL","createObjectURL","document","createElement","href","download","click","revokeObjectURL","applyGridCoordinates","rb","gridWidth","gridHeight","worldWidth","worldHeight","handleGridClick","exists","some","c","filter","addSelectedCell","applyPlaceToSelected","name","relation","cell","places","objects","robots","id","implicit","symbolic","label","applyObjectToSelected","style","display","children","width","height","backgroundImage","backgroundSize","backgroundRepeat","position","border","onMouseDown","e","current","rect","currentTarget","getBoundingClientRect","Math","floor","clientX","left","clientY","top","onMouseMove","onMouseUp","onMouseLeave","Array","_","background","fileName","_jsxFileName","lineNumber","columnNumber","val","place","hasObject","isPath","isWall","bgColor","pointerEvents","marginLeft","onClick","completed","p","overflow","_c","$RefreshReg$"],"sources":["/home/n/semantic_map_ui/src/App.js"],"sourcesContent":["import { useEffect, useState, useRef } from 'react';\n\n/* ===== MAP PARAMS ===== */\nconst GRID_SIZE = 20;\nconst MAP_SIZE = 800;\nconst GRID_COUNT = MAP_SIZE / GRID_SIZE;\n\nfunction App() {\n    const [mode, setMode] = useState('place'); // place | object\n    const [gridMap, setGridMap] = useState({});\n    const [selectedCells, setSelectedCells] = useState([]);\n    const [isDragging, setIsDragging] = useState(false);\n    const draggedRef = useRef(false);\n    const [coordMode, setCoordMode] = useState(false); // Ï¢åÌëúÏßÄÏ†ï Î™®Îìú\n    const [coordStep, setCoordStep] = useState('IDLE'); // Ï¢åÌëúÏßÄÏ†ï Îã®Í≥Ñ\n    const [coordPoints, setCoordPoints] = useState([]); // {gx, gy, x, y}\n\n\n    /* ===== JSON LOAD ===== */\n    useEffect(() => {\n        fetch('/semantic_grid_map.json')\n            .then((res) => (res.ok ? res.json() : null))\n            .then((data) => {\n                if (data?.grid) setGridMap(data.grid);\n            })\n            .catch(() => console.log('no json'));\n    }, []);\n    useEffect(() => {\n    if (coordStep === 'COLLECT' && gridPoints.length === 5) {\n        setCoordStep('INPUT');\n    }\n}, [gridPoints, coordStep]);\nuseEffect(() => {\n    if (coordStep !== 'INPUT') return;\n\n    const inputWorldCoords = async () => {\n        const labels = [\n            'Ï§ëÏã¨ Ï¢åÌëú (0,0)',\n            'ÏôºÏ™Ω ÏúÑ',\n            'Ïò§Î•∏Ï™Ω ÏúÑ',\n            'ÏôºÏ™Ω ÏïÑÎûò',\n            'Ïò§Î•∏Ï™Ω ÏïÑÎûò',\n        ];\n\n        const result = [];\n\n        for (let i = 0; i < 5; i++) {\n            const x = Number(prompt(`${labels[i]} - world X Ï¢åÌëú`));\n            const y = Number(prompt(`${labels[i]} - world Y Ï¢åÌëú`));\n\n            if (isNaN(x) || isNaN(y)) {\n                alert('Ïà´ÏûêÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî');\n                i--;\n                continue;\n            }\n\n            result.push({ x, y });\n        }\n\n        setWorldPoints(result);\n        setCoordStep('IDLE');\n        setCoordMode(false);\n\n        alert('Ï¢åÌëú ÏûÖÎ†• ÏôÑÎ£å');\n    };\n\n    inputWorldCoords();\n}, [coordStep]);\nuseEffect(() => {\n    if (coordStep !== 'APPLY') return;\n\n    const [origin, lt, rt, lb] = coordPoints;\n\n    const gridW = rt.gx - lt.gx;\n    const gridH = lb.gy - lt.gy;\n    const worldW = rt.x - lt.x;\n    const worldH = lb.y - lt.y;\n\n    const dx = worldW / gridW;\n    const dy = worldH / gridH;\n\n    setGridMap(prev => {\n        const updated = { ...prev };\n\n        Object.keys(updated).forEach(key => {\n            const [gx, gy] = key.split(',').map(Number);\n            const wx = lt.x + (gx - lt.gx) * dx;\n            const wy = lt.y + (gy - lt.gy) * dy;\n\n            updated[key] = {\n                ...updated[key],\n                explicit: {\n                    grid: { gx, gy },\n                    world: { x: +wx.toFixed(3), y: +wy.toFixed(3) }\n                }\n            };\n        });\n\n        return updated;\n    });\n\n    setCoordStep('IDLE');\n    alert('Ï¢åÌëú Îß§Ìïë ÏôÑÎ£å');\n}, [coordStep]);\n\n\n\n    /* ===== GRID SORT (y desc ‚Üí x desc) ===== */\n    const sortGridDesc = (grid) => {\n        return Object.fromEntries(\n            Object.entries(grid).sort(([a], [b]) => {\n                const [ax, ay] = a.split(',').map(Number);\n                const [bx, by] = b.split(',').map(Number);\n                if (ay !== by) return by - ay;\n                return bx - ax;\n            })\n        );\n    };\n\n    /* ===== JSON SAVE ===== */\n    const saveJSON = () => {\n        const sortedGrid = sortGridDesc(gridMap);\n\n        const blob = new Blob([JSON.stringify({ grid: sortedGrid }, null, 2)], {\n            type: 'application/json',\n        });\n\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = 'semantic_grid_map.json';\n        a.click();\n        URL.revokeObjectURL(url);\n    };\n\n    const applyGridCoordinates = () => {\n    if (coordPoints.length !== 5) {\n        alert('Ï¢åÌëúÎäî Ï†ïÌôïÌûà 5Í∞ú Ï∞çÏñ¥Ïïº Ìï©ÎãàÎã§');\n        return;\n    }\n\n    const [origin, lt, rt, lb, rb] = coordPoints;\n\n    // grid Í∏∞Ï§Ä Ìè≠/ÎÜíÏù¥\n    const gridWidth = rt.gx - lt.gx;\n    const gridHeight = lb.gy - lt.gy;\n\n    // Ïã§Ï†ú Ï¢åÌëú Í∏∞Ï§Ä Ìè≠/ÎÜíÏù¥\n    const worldWidth = rt.x - lt.x;\n    const worldHeight = lb.y - lt.y;\n\n    const dx = worldWidth / gridWidth;\n    const dy = worldHeight / gridHeight;\n\n    setGridMap(prev => {\n        const updated = { ...prev };\n\n        Object.keys(updated).forEach(key => {\n            const [gx, gy] = key.split(',').map(Number);\n\n            const wx = lt.x + (gx - lt.gx) * dx;\n            const wy = lt.y + (gy - lt.gy) * dy;\n\n            updated[key] = {\n                ...updated[key],\n                explicit: {\n                    ...(updated[key].explicit || {}),\n                    world: {\n                        x: Number(wx.toFixed(3)),\n                        y: Number(wy.toFixed(3)),\n                    },\n                },\n            };\n        });\n\n        return updated;\n    });\n\n    setCoordPoints([]);\n};\n\n\n    /* ===== GRID CLICK (ÏÑ†ÌÉùÎßå Îã¥Îãπ) ===== */\n    const handleGridClick = (gx, gy) => {\n        const exists = selectedCells.some((c) => c.x === gx && c.y === gy);\n\n        if (exists) {\n            setSelectedCells((prev) =>\n                prev.filter((c) => !(c.x === gx && c.y === gy))\n            );\n        } else {\n            setSelectedCells((prev) => [...prev, { x: gx, y: gy }]);\n        }\n    };\n\n    const addSelectedCell = (gx, gy) => {\n        setSelectedCells((prev) => {\n            if (prev.some((c) => c.x === gx && c.y === gy)) return prev;\n            return [...prev, { x: gx, y: gy }];\n        });\n    };\n\n    /* ===== APPLY PLACE ===== */\n    const applyPlaceToSelected = () => {\n        if (selectedCells.length === 0) return;\n\n        const name = prompt('place name?');\n        const relation = prompt('relation?');\n        if (!name) return;\n\n        setGridMap((prev) => {\n            const updated = { ...prev };\n\n            selectedCells.forEach(({ x, y }) => {\n                const key = `${x},${y}`;\n                const cell = updated[key] || {\n                    places: [],\n                    objects: [],\n                    robots: [],\n                };\n\n                updated[key] = {\n                    ...cell,\n                    places: [\n                        {\n                            id: name,\n                            type: 'place',\n                            explicit: { grid: { x, y } },\n                            implicit: { relation: relation || 'none' },\n                            symbolic: { label: name },\n                        },\n                    ], // ‚úÖ ÎçÆÏñ¥Ïì∞Í∏∞\n                };\n            });\n\n            return updated;\n        });\n\n        setSelectedCells([]);\n    };\n\n    /* ===== APPLY OBJECT ===== */\n    const applyObjectToSelected = () => {\n        if (selectedCells.length === 0) return;\n\n        const id = prompt('object id?');\n        const type = prompt('object type?');\n        const relation = prompt('relation?');\n        if (!id || !type) return;\n\n        setGridMap((prev) => {\n            const updated = { ...prev };\n\n            selectedCells.forEach(({ x, y }) => {\n                const key = `${x},${y}`;\n                const cell = updated[key];\n                if (!cell || cell.places.length === 0) return;\n\n                updated[key] = {\n                    ...cell,\n                    objects: [\n                        {\n                            id,\n                            type,\n                            explicit: { grid: { x, y } },\n                            implicit: { relation: relation || 'none' },\n                            symbolic: { label: type },\n                        },\n                    ], // ‚úÖ ÎçÆÏñ¥Ïì∞Í∏∞\n                };\n            });\n\n            return updated;\n        });\n\n        setSelectedCells([]);\n    };\n\n    return (\n        <div style={{ display: 'flex' }}>\n            {/* MAP */}\n            <div\n                style={{\n                    width: MAP_SIZE,\n                    height: MAP_SIZE,\n                    backgroundImage: \"url('/map.png')\",\n                    backgroundSize: `${MAP_SIZE}px ${MAP_SIZE}px`,\n                    backgroundRepeat: 'no-repeat',\n                    position: 'relative',\n                    border: '1px solid black',\n                }}\n                onMouseDown={(e) => {\n                    draggedRef.current = false;\n                    setIsDragging(true);\n\n                    const rect = e.currentTarget.getBoundingClientRect();\n                    const gx = Math.floor((e.clientX - rect.left) / GRID_SIZE);\n                    const gy = Math.floor((e.clientY - rect.top) / GRID_SIZE);\n\n                    addSelectedCell(gx, gy);\n                }}\n                onMouseMove={(e) => {\n                    if (!isDragging) return;\n\n                    draggedRef.current = true; // ‚≠ê ÎìúÎûòÍ∑∏ Î∞úÏÉù Í∏∞Î°ù\n\n                    const rect = e.currentTarget.getBoundingClientRect();\n                    const gx = Math.floor((e.clientX - rect.left) / GRID_SIZE);\n                    const gy = Math.floor((e.clientY - rect.top) / GRID_SIZE);\n\n                    addSelectedCell(gx, gy);\n                }}\n                onMouseUp={(e) => {\n    setIsDragging(false);\n\n    const rect = e.currentTarget.getBoundingClientRect();\n    const gx = Math.floor((e.clientX - rect.left) / GRID_SIZE);\n    const gy = Math.floor((e.clientY - rect.top) / GRID_SIZE);\n\n    if (!draggedRef.current) {\n        handleGridClick(gx, gy);\n\n        // ‚≠ê ÌÅ¥Î¶≠ ÏàòÏßë Îã®Í≥Ñ\n        if (coordStep === 'COLLECT' && !draggedRef.current) {\n    setCoordPoints(prev => {\n        if (prev.length >= 5) return prev;\n        return [...prev, { gx, gy }];\n    });\n}\n\n    }\n}}\n\n\n                onMouseLeave={() => {\n                    setIsDragging(false);\n                    draggedRef.current = false;\n                }}\n            >\n                {/* GRID LINES */}\n                {[...Array(GRID_COUNT)].map((_, i) => (\n                    <div\n                        key={`v${i}`}\n                        style={{\n                            position: 'absolute',\n                            left: i * GRID_SIZE,\n                            top: 0,\n                            width: 1,\n                            height: '100%',\n                            background: 'rgba(0,0,0,0.2)',\n                        }}\n                    />\n                ))}\n                {[...Array(GRID_COUNT)].map((_, i) => (\n                    <div\n                        key={`h${i}`}\n                        style={{\n                            position: 'absolute',\n                            top: i * GRID_SIZE,\n                            left: 0,\n                            height: 1,\n                            width: '100%',\n                            background: 'rgba(0,0,0,0.2)',\n                        }}\n                    />\n                ))}\n\n                {/* PLACE / OBJECT VIS */}\n                {Object.entries(gridMap).map(([key, val]) => {\n                    if (!val.places || val.places.length === 0) return null;\n\n                    const [gx, gy] = key.split(',').map(Number);\n\n                    const place = val.places[0]; // ÌòÑÏû¨ ÏÖÄÏùò ÎåÄÌëú place\n                    const hasObject = val.objects && val.objects.length > 0;\n                    const isPath = place.id === 'path';\n                    const isWall = place.id === 'wall';\n\n                    let bgColor = 'rgba(255,255,255,0.0)';\n\n                    if (isPath) {\n                        bgColor = 'rgba(0,255,0,0.25)'; // üü¢\n                    } else if (hasObject || isWall) {\n                        bgColor = 'rgba(255,0,0,0.25)'; // üî¥\n                    } else if (!hasObject) {\n                        bgColor = 'rgba(255,255,0,0.35)'; // üü°\n                    }\n\n                    return (\n                        <div\n                            key={key}\n                            style={{\n                                position: 'absolute',\n                                left: gx * GRID_SIZE,\n                                top: gy * GRID_SIZE,\n                                width: GRID_SIZE,\n                                height: GRID_SIZE,\n                                background: bgColor,\n                                pointerEvents: 'none',\n                            }}\n                        />\n                    );\n                })}\n\n                {/* SELECTED VIS */}\n                {selectedCells.map(({ x, y }) => (\n                    <div\n                        key={`sel-${x},${y}`}\n                        style={{\n                            position: 'absolute',\n                            left: x * GRID_SIZE,\n                            top: y * GRID_SIZE,\n                            width: GRID_SIZE,\n                            height: GRID_SIZE,\n                            background: 'rgba(0,0,255,0.35)',\n                            pointerEvents: 'none',\n                        }}\n                    />\n                ))}\n            </div>\n\n            {/* ===== PANEL ===== */}\n            <div style={{ marginLeft: 20, width: 420 }}>\n                <h3>Mode</h3>\n                <button onClick={() => setMode('place')}>Place</button>\n                <button onClick={() => setMode('object')}>Object</button>\n                <br />\n                <br />\n\n                <button\n                    onClick={\n                        mode === 'place'\n                            ? applyPlaceToSelected\n                            : applyObjectToSelected\n                    }\n                >\n                    Apply to Selected Cells\n                </button>\n\n                <button onClick={saveJSON} style={{ marginLeft: 10 }}>\n                    Save JSON\n                </button>\n\n                <button\n  onClick={() => {\n    setCoordPoints([]);\n    setCoordStep('COLLECT');\n    alert('Ï§ëÏã¨ ‚Üí Ï¢åÏÉÅ ‚Üí Ïö∞ÏÉÅ ‚Üí Ï¢åÌïò ‚Üí Ïö∞Ìïò ÏàúÏÑúÎ°ú 5Ï†ê ÌÅ¥Î¶≠');\n  }}\n>\n  Start Coordinate Mapping\n</button>\n\n<button\n  onClick={() => {\n    if (coordPoints.length !== 5) {\n      alert('Ï†ê 5Í∞úÎ•º Î®ºÏ†Ä Ï∞çÏúºÏÑ∏Ïöî');\n      return;\n    }\n\n    const labels = [\n      'Ï§ëÏã¨ (0,0)',\n      'ÏôºÏ™Ω ÏúÑ',\n      'Ïò§Î•∏Ï™Ω ÏúÑ',\n      'ÏôºÏ™Ω ÏïÑÎûò',\n      'Ïò§Î•∏Ï™Ω ÏïÑÎûò',\n    ];\n\n    const completed = coordPoints.map((p, i) => {\n      const x = Number(prompt(`${labels[i]} X`));\n      const y = Number(prompt(`${labels[i]} Y`));\n      return { ...p, x, y };\n    });\n\n    setCoordPoints(completed);\n    setCoordStep('APPLY');\n  }}\n>\n  Apply Grid Coordinates\n</button>\n\n\n\n\n                <pre style={{ height: 600, overflow: 'auto' }}>\n                    {JSON.stringify({ grid: gridMap }, null, 2)}\n                </pre>\n            </div>\n        </div>\n    );\n}\n\nexport default App;\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;;AAEnD;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,MAAMC,SAAS,GAAG,EAAE;AACpB,MAAMC,QAAQ,GAAG,GAAG;AACpB,MAAMC,UAAU,GAAGD,QAAQ,GAAGD,SAAS;AAEvC,SAASG,GAAGA,CAAA,EAAG;EAAAC,EAAA;EACX,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGV,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC;EAC3C,MAAM,CAACW,OAAO,EAAEC,UAAU,CAAC,GAAGZ,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC1C,MAAM,CAACa,aAAa,EAAEC,gBAAgB,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACe,UAAU,EAAEC,aAAa,CAAC,GAAGhB,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAMiB,UAAU,GAAGhB,MAAM,CAAC,KAAK,CAAC;EAChC,MAAM,CAACiB,SAAS,EAAEC,YAAY,CAAC,GAAGnB,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;EACnD,MAAM,CAACoB,SAAS,EAAEC,YAAY,CAAC,GAAGrB,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;EACpD,MAAM,CAACsB,WAAW,EAAEC,cAAc,CAAC,GAAGvB,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;;EAGpD;EACAD,SAAS,CAAC,MAAM;IACZyB,KAAK,CAAC,yBAAyB,CAAC,CAC3BC,IAAI,CAAEC,GAAG,IAAMA,GAAG,CAACC,EAAE,GAAGD,GAAG,CAACE,IAAI,CAAC,CAAC,GAAG,IAAK,CAAC,CAC3CH,IAAI,CAAEI,IAAI,IAAK;MACZ,IAAIA,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEC,IAAI,EAAElB,UAAU,CAACiB,IAAI,CAACC,IAAI,CAAC;IACzC,CAAC,CAAC,CACDC,KAAK,CAAC,MAAMC,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC,CAAC;EAC5C,CAAC,EAAE,EAAE,CAAC;EACNlC,SAAS,CAAC,MAAM;IAChB,IAAIqB,SAAS,KAAK,SAAS,IAAIc,UAAU,CAACC,MAAM,KAAK,CAAC,EAAE;MACpDd,YAAY,CAAC,OAAO,CAAC;IACzB;EACJ,CAAC,EAAE,CAACa,UAAU,EAAEd,SAAS,CAAC,CAAC;EAC3BrB,SAAS,CAAC,MAAM;IACZ,IAAIqB,SAAS,KAAK,OAAO,EAAE;IAE3B,MAAMgB,gBAAgB,GAAG,MAAAA,CAAA,KAAY;MACjC,MAAMC,MAAM,GAAG,CACX,aAAa,EACb,MAAM,EACN,OAAO,EACP,OAAO,EACP,QAAQ,CACX;MAED,MAAMC,MAAM,GAAG,EAAE;MAEjB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;QACxB,MAAMC,CAAC,GAAGC,MAAM,CAACC,MAAM,CAAC,GAAGL,MAAM,CAACE,CAAC,CAAC,eAAe,CAAC,CAAC;QACrD,MAAMI,CAAC,GAAGF,MAAM,CAACC,MAAM,CAAC,GAAGL,MAAM,CAACE,CAAC,CAAC,eAAe,CAAC,CAAC;QAErD,IAAIK,KAAK,CAACJ,CAAC,CAAC,IAAII,KAAK,CAACD,CAAC,CAAC,EAAE;UACtBE,KAAK,CAAC,WAAW,CAAC;UAClBN,CAAC,EAAE;UACH;QACJ;QAEAD,MAAM,CAACQ,IAAI,CAAC;UAAEN,CAAC;UAAEG;QAAE,CAAC,CAAC;MACzB;MAEAI,cAAc,CAACT,MAAM,CAAC;MACtBjB,YAAY,CAAC,MAAM,CAAC;MACpBF,YAAY,CAAC,KAAK,CAAC;MAEnB0B,KAAK,CAAC,UAAU,CAAC;IACrB,CAAC;IAEDT,gBAAgB,CAAC,CAAC;EACtB,CAAC,EAAE,CAAChB,SAAS,CAAC,CAAC;EACfrB,SAAS,CAAC,MAAM;IACZ,IAAIqB,SAAS,KAAK,OAAO,EAAE;IAE3B,MAAM,CAAC4B,MAAM,EAAEC,EAAE,EAAEC,EAAE,EAAEC,EAAE,CAAC,GAAG7B,WAAW;IAExC,MAAM8B,KAAK,GAAGF,EAAE,CAACG,EAAE,GAAGJ,EAAE,CAACI,EAAE;IAC3B,MAAMC,KAAK,GAAGH,EAAE,CAACI,EAAE,GAAGN,EAAE,CAACM,EAAE;IAC3B,MAAMC,MAAM,GAAGN,EAAE,CAACV,CAAC,GAAGS,EAAE,CAACT,CAAC;IAC1B,MAAMiB,MAAM,GAAGN,EAAE,CAACR,CAAC,GAAGM,EAAE,CAACN,CAAC;IAE1B,MAAMe,EAAE,GAAGF,MAAM,GAAGJ,KAAK;IACzB,MAAMO,EAAE,GAAGF,MAAM,GAAGH,KAAK;IAEzB1C,UAAU,CAACgD,IAAI,IAAI;MACf,MAAMC,OAAO,GAAG;QAAE,GAAGD;MAAK,CAAC;MAE3BE,MAAM,CAACC,IAAI,CAACF,OAAO,CAAC,CAACG,OAAO,CAACC,GAAG,IAAI;QAChC,MAAM,CAACZ,EAAE,EAAEE,EAAE,CAAC,GAAGU,GAAG,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC1B,MAAM,CAAC;QAC3C,MAAM2B,EAAE,GAAGnB,EAAE,CAACT,CAAC,GAAG,CAACa,EAAE,GAAGJ,EAAE,CAACI,EAAE,IAAIK,EAAE;QACnC,MAAMW,EAAE,GAAGpB,EAAE,CAACN,CAAC,GAAG,CAACY,EAAE,GAAGN,EAAE,CAACM,EAAE,IAAII,EAAE;QAEnCE,OAAO,CAACI,GAAG,CAAC,GAAG;UACX,GAAGJ,OAAO,CAACI,GAAG,CAAC;UACfK,QAAQ,EAAE;YACNxC,IAAI,EAAE;cAAEuB,EAAE;cAAEE;YAAG,CAAC;YAChBgB,KAAK,EAAE;cAAE/B,CAAC,EAAE,CAAC4B,EAAE,CAACI,OAAO,CAAC,CAAC,CAAC;cAAE7B,CAAC,EAAE,CAAC0B,EAAE,CAACG,OAAO,CAAC,CAAC;YAAE;UAClD;QACJ,CAAC;MACL,CAAC,CAAC;MAEF,OAAOX,OAAO;IAClB,CAAC,CAAC;IAEFxC,YAAY,CAAC,MAAM,CAAC;IACpBwB,KAAK,CAAC,UAAU,CAAC;EACrB,CAAC,EAAE,CAACzB,SAAS,CAAC,CAAC;;EAIX;EACA,MAAMqD,YAAY,GAAI3C,IAAI,IAAK;IAC3B,OAAOgC,MAAM,CAACY,WAAW,CACrBZ,MAAM,CAACa,OAAO,CAAC7C,IAAI,CAAC,CAAC8C,IAAI,CAAC,CAAC,CAACC,CAAC,CAAC,EAAE,CAACC,CAAC,CAAC,KAAK;MACpC,MAAM,CAACC,EAAE,EAAEC,EAAE,CAAC,GAAGH,CAAC,CAACX,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC1B,MAAM,CAAC;MACzC,MAAM,CAACwC,EAAE,EAAEC,EAAE,CAAC,GAAGJ,CAAC,CAACZ,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC1B,MAAM,CAAC;MACzC,IAAIuC,EAAE,KAAKE,EAAE,EAAE,OAAOA,EAAE,GAAGF,EAAE;MAC7B,OAAOC,EAAE,GAAGF,EAAE;IAClB,CAAC,CACL,CAAC;EACL,CAAC;;EAED;EACA,MAAMI,QAAQ,GAAGA,CAAA,KAAM;IACnB,MAAMC,UAAU,GAAGX,YAAY,CAAC9D,OAAO,CAAC;IAExC,MAAM0E,IAAI,GAAG,IAAIC,IAAI,CAAC,CAACC,IAAI,CAACC,SAAS,CAAC;MAAE1D,IAAI,EAAEsD;IAAW,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE;MACnEK,IAAI,EAAE;IACV,CAAC,CAAC;IAEF,MAAMC,GAAG,GAAGC,GAAG,CAACC,eAAe,CAACP,IAAI,CAAC;IACrC,MAAMR,CAAC,GAAGgB,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;IACrCjB,CAAC,CAACkB,IAAI,GAAGL,GAAG;IACZb,CAAC,CAACmB,QAAQ,GAAG,wBAAwB;IACrCnB,CAAC,CAACoB,KAAK,CAAC,CAAC;IACTN,GAAG,CAACO,eAAe,CAACR,GAAG,CAAC;EAC5B,CAAC;EAED,MAAMS,oBAAoB,GAAGA,CAAA,KAAM;IACnC,IAAI7E,WAAW,CAACa,MAAM,KAAK,CAAC,EAAE;MAC1BU,KAAK,CAAC,oBAAoB,CAAC;MAC3B;IACJ;IAEA,MAAM,CAACG,MAAM,EAAEC,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEiD,EAAE,CAAC,GAAG9E,WAAW;;IAE5C;IACA,MAAM+E,SAAS,GAAGnD,EAAE,CAACG,EAAE,GAAGJ,EAAE,CAACI,EAAE;IAC/B,MAAMiD,UAAU,GAAGnD,EAAE,CAACI,EAAE,GAAGN,EAAE,CAACM,EAAE;;IAEhC;IACA,MAAMgD,UAAU,GAAGrD,EAAE,CAACV,CAAC,GAAGS,EAAE,CAACT,CAAC;IAC9B,MAAMgE,WAAW,GAAGrD,EAAE,CAACR,CAAC,GAAGM,EAAE,CAACN,CAAC;IAE/B,MAAMe,EAAE,GAAG6C,UAAU,GAAGF,SAAS;IACjC,MAAM1C,EAAE,GAAG6C,WAAW,GAAGF,UAAU;IAEnC1F,UAAU,CAACgD,IAAI,IAAI;MACf,MAAMC,OAAO,GAAG;QAAE,GAAGD;MAAK,CAAC;MAE3BE,MAAM,CAACC,IAAI,CAACF,OAAO,CAAC,CAACG,OAAO,CAACC,GAAG,IAAI;QAChC,MAAM,CAACZ,EAAE,EAAEE,EAAE,CAAC,GAAGU,GAAG,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC1B,MAAM,CAAC;QAE3C,MAAM2B,EAAE,GAAGnB,EAAE,CAACT,CAAC,GAAG,CAACa,EAAE,GAAGJ,EAAE,CAACI,EAAE,IAAIK,EAAE;QACnC,MAAMW,EAAE,GAAGpB,EAAE,CAACN,CAAC,GAAG,CAACY,EAAE,GAAGN,EAAE,CAACM,EAAE,IAAII,EAAE;QAEnCE,OAAO,CAACI,GAAG,CAAC,GAAG;UACX,GAAGJ,OAAO,CAACI,GAAG,CAAC;UACfK,QAAQ,EAAE;YACN,IAAIT,OAAO,CAACI,GAAG,CAAC,CAACK,QAAQ,IAAI,CAAC,CAAC,CAAC;YAChCC,KAAK,EAAE;cACH/B,CAAC,EAAEC,MAAM,CAAC2B,EAAE,CAACI,OAAO,CAAC,CAAC,CAAC,CAAC;cACxB7B,CAAC,EAAEF,MAAM,CAAC4B,EAAE,CAACG,OAAO,CAAC,CAAC,CAAC;YAC3B;UACJ;QACJ,CAAC;MACL,CAAC,CAAC;MAEF,OAAOX,OAAO;IAClB,CAAC,CAAC;IAEFtC,cAAc,CAAC,EAAE,CAAC;EACtB,CAAC;;EAGG;EACA,MAAMkF,eAAe,GAAGA,CAACpD,EAAE,EAAEE,EAAE,KAAK;IAChC,MAAMmD,MAAM,GAAG7F,aAAa,CAAC8F,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACpE,CAAC,KAAKa,EAAE,IAAIuD,CAAC,CAACjE,CAAC,KAAKY,EAAE,CAAC;IAElE,IAAImD,MAAM,EAAE;MACR5F,gBAAgB,CAAE8C,IAAI,IAClBA,IAAI,CAACiD,MAAM,CAAED,CAAC,IAAK,EAAEA,CAAC,CAACpE,CAAC,KAAKa,EAAE,IAAIuD,CAAC,CAACjE,CAAC,KAAKY,EAAE,CAAC,CAClD,CAAC;IACL,CAAC,MAAM;MACHzC,gBAAgB,CAAE8C,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAE;QAAEpB,CAAC,EAAEa,EAAE;QAAEV,CAAC,EAAEY;MAAG,CAAC,CAAC,CAAC;IAC3D;EACJ,CAAC;EAED,MAAMuD,eAAe,GAAGA,CAACzD,EAAE,EAAEE,EAAE,KAAK;IAChCzC,gBAAgB,CAAE8C,IAAI,IAAK;MACvB,IAAIA,IAAI,CAAC+C,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACpE,CAAC,KAAKa,EAAE,IAAIuD,CAAC,CAACjE,CAAC,KAAKY,EAAE,CAAC,EAAE,OAAOK,IAAI;MAC3D,OAAO,CAAC,GAAGA,IAAI,EAAE;QAAEpB,CAAC,EAAEa,EAAE;QAAEV,CAAC,EAAEY;MAAG,CAAC,CAAC;IACtC,CAAC,CAAC;EACN,CAAC;;EAED;EACA,MAAMwD,oBAAoB,GAAGA,CAAA,KAAM;IAC/B,IAAIlG,aAAa,CAACsB,MAAM,KAAK,CAAC,EAAE;IAEhC,MAAM6E,IAAI,GAAGtE,MAAM,CAAC,aAAa,CAAC;IAClC,MAAMuE,QAAQ,GAAGvE,MAAM,CAAC,WAAW,CAAC;IACpC,IAAI,CAACsE,IAAI,EAAE;IAEXpG,UAAU,CAAEgD,IAAI,IAAK;MACjB,MAAMC,OAAO,GAAG;QAAE,GAAGD;MAAK,CAAC;MAE3B/C,aAAa,CAACmD,OAAO,CAAC,CAAC;QAAExB,CAAC;QAAEG;MAAE,CAAC,KAAK;QAChC,MAAMsB,GAAG,GAAG,GAAGzB,CAAC,IAAIG,CAAC,EAAE;QACvB,MAAMuE,IAAI,GAAGrD,OAAO,CAACI,GAAG,CAAC,IAAI;UACzBkD,MAAM,EAAE,EAAE;UACVC,OAAO,EAAE,EAAE;UACXC,MAAM,EAAE;QACZ,CAAC;QAEDxD,OAAO,CAACI,GAAG,CAAC,GAAG;UACX,GAAGiD,IAAI;UACPC,MAAM,EAAE,CACJ;YACIG,EAAE,EAAEN,IAAI;YACRvB,IAAI,EAAE,OAAO;YACbnB,QAAQ,EAAE;cAAExC,IAAI,EAAE;gBAAEU,CAAC;gBAAEG;cAAE;YAAE,CAAC;YAC5B4E,QAAQ,EAAE;cAAEN,QAAQ,EAAEA,QAAQ,IAAI;YAAO,CAAC;YAC1CO,QAAQ,EAAE;cAAEC,KAAK,EAAET;YAAK;UAC5B,CAAC,CACJ,CAAE;QACP,CAAC;MACL,CAAC,CAAC;MAEF,OAAOnD,OAAO;IAClB,CAAC,CAAC;IAEF/C,gBAAgB,CAAC,EAAE,CAAC;EACxB,CAAC;;EAED;EACA,MAAM4G,qBAAqB,GAAGA,CAAA,KAAM;IAChC,IAAI7G,aAAa,CAACsB,MAAM,KAAK,CAAC,EAAE;IAEhC,MAAMmF,EAAE,GAAG5E,MAAM,CAAC,YAAY,CAAC;IAC/B,MAAM+C,IAAI,GAAG/C,MAAM,CAAC,cAAc,CAAC;IACnC,MAAMuE,QAAQ,GAAGvE,MAAM,CAAC,WAAW,CAAC;IACpC,IAAI,CAAC4E,EAAE,IAAI,CAAC7B,IAAI,EAAE;IAElB7E,UAAU,CAAEgD,IAAI,IAAK;MACjB,MAAMC,OAAO,GAAG;QAAE,GAAGD;MAAK,CAAC;MAE3B/C,aAAa,CAACmD,OAAO,CAAC,CAAC;QAAExB,CAAC;QAAEG;MAAE,CAAC,KAAK;QAChC,MAAMsB,GAAG,GAAG,GAAGzB,CAAC,IAAIG,CAAC,EAAE;QACvB,MAAMuE,IAAI,GAAGrD,OAAO,CAACI,GAAG,CAAC;QACzB,IAAI,CAACiD,IAAI,IAAIA,IAAI,CAACC,MAAM,CAAChF,MAAM,KAAK,CAAC,EAAE;QAEvC0B,OAAO,CAACI,GAAG,CAAC,GAAG;UACX,GAAGiD,IAAI;UACPE,OAAO,EAAE,CACL;YACIE,EAAE;YACF7B,IAAI;YACJnB,QAAQ,EAAE;cAAExC,IAAI,EAAE;gBAAEU,CAAC;gBAAEG;cAAE;YAAE,CAAC;YAC5B4E,QAAQ,EAAE;cAAEN,QAAQ,EAAEA,QAAQ,IAAI;YAAO,CAAC;YAC1CO,QAAQ,EAAE;cAAEC,KAAK,EAAEhC;YAAK;UAC5B,CAAC,CACJ,CAAE;QACP,CAAC;MACL,CAAC,CAAC;MAEF,OAAO5B,OAAO;IAClB,CAAC,CAAC;IAEF/C,gBAAgB,CAAC,EAAE,CAAC;EACxB,CAAC;EAED,oBACIX,OAAA;IAAKwH,KAAK,EAAE;MAAEC,OAAO,EAAE;IAAO,CAAE;IAAAC,QAAA,gBAE5B1H,OAAA;MACIwH,KAAK,EAAE;QACHG,KAAK,EAAEzH,QAAQ;QACf0H,MAAM,EAAE1H,QAAQ;QAChB2H,eAAe,EAAE,iBAAiB;QAClCC,cAAc,EAAE,GAAG5H,QAAQ,MAAMA,QAAQ,IAAI;QAC7C6H,gBAAgB,EAAE,WAAW;QAC7BC,QAAQ,EAAE,UAAU;QACpBC,MAAM,EAAE;MACZ,CAAE;MACFC,WAAW,EAAGC,CAAC,IAAK;QAChBrH,UAAU,CAACsH,OAAO,GAAG,KAAK;QAC1BvH,aAAa,CAAC,IAAI,CAAC;QAEnB,MAAMwH,IAAI,GAAGF,CAAC,CAACG,aAAa,CAACC,qBAAqB,CAAC,CAAC;QACpD,MAAMrF,EAAE,GAAGsF,IAAI,CAACC,KAAK,CAAC,CAACN,CAAC,CAACO,OAAO,GAAGL,IAAI,CAACM,IAAI,IAAI1I,SAAS,CAAC;QAC1D,MAAMmD,EAAE,GAAGoF,IAAI,CAACC,KAAK,CAAC,CAACN,CAAC,CAACS,OAAO,GAAGP,IAAI,CAACQ,GAAG,IAAI5I,SAAS,CAAC;QAEzD0G,eAAe,CAACzD,EAAE,EAAEE,EAAE,CAAC;MAC3B,CAAE;MACF0F,WAAW,EAAGX,CAAC,IAAK;QAChB,IAAI,CAACvH,UAAU,EAAE;QAEjBE,UAAU,CAACsH,OAAO,GAAG,IAAI,CAAC,CAAC;;QAE3B,MAAMC,IAAI,GAAGF,CAAC,CAACG,aAAa,CAACC,qBAAqB,CAAC,CAAC;QACpD,MAAMrF,EAAE,GAAGsF,IAAI,CAACC,KAAK,CAAC,CAACN,CAAC,CAACO,OAAO,GAAGL,IAAI,CAACM,IAAI,IAAI1I,SAAS,CAAC;QAC1D,MAAMmD,EAAE,GAAGoF,IAAI,CAACC,KAAK,CAAC,CAACN,CAAC,CAACS,OAAO,GAAGP,IAAI,CAACQ,GAAG,IAAI5I,SAAS,CAAC;QAEzD0G,eAAe,CAACzD,EAAE,EAAEE,EAAE,CAAC;MAC3B,CAAE;MACF2F,SAAS,EAAGZ,CAAC,IAAK;QAC9BtH,aAAa,CAAC,KAAK,CAAC;QAEpB,MAAMwH,IAAI,GAAGF,CAAC,CAACG,aAAa,CAACC,qBAAqB,CAAC,CAAC;QACpD,MAAMrF,EAAE,GAAGsF,IAAI,CAACC,KAAK,CAAC,CAACN,CAAC,CAACO,OAAO,GAAGL,IAAI,CAACM,IAAI,IAAI1I,SAAS,CAAC;QAC1D,MAAMmD,EAAE,GAAGoF,IAAI,CAACC,KAAK,CAAC,CAACN,CAAC,CAACS,OAAO,GAAGP,IAAI,CAACQ,GAAG,IAAI5I,SAAS,CAAC;QAEzD,IAAI,CAACa,UAAU,CAACsH,OAAO,EAAE;UACrB9B,eAAe,CAACpD,EAAE,EAAEE,EAAE,CAAC;;UAEvB;UACA,IAAInC,SAAS,KAAK,SAAS,IAAI,CAACH,UAAU,CAACsH,OAAO,EAAE;YACxDhH,cAAc,CAACqC,IAAI,IAAI;cACnB,IAAIA,IAAI,CAACzB,MAAM,IAAI,CAAC,EAAE,OAAOyB,IAAI;cACjC,OAAO,CAAC,GAAGA,IAAI,EAAE;gBAAEP,EAAE;gBAAEE;cAAG,CAAC,CAAC;YAChC,CAAC,CAAC;UACN;QAEI;MACJ,CAAE;MAGc4F,YAAY,EAAEA,CAAA,KAAM;QAChBnI,aAAa,CAAC,KAAK,CAAC;QACpBC,UAAU,CAACsH,OAAO,GAAG,KAAK;MAC9B,CAAE;MAAAV,QAAA,GAGD,CAAC,GAAGuB,KAAK,CAAC9I,UAAU,CAAC,CAAC,CAAC6D,GAAG,CAAC,CAACkF,CAAC,EAAE9G,CAAC,kBAC7BpC,OAAA;QAEIwH,KAAK,EAAE;UACHQ,QAAQ,EAAE,UAAU;UACpBW,IAAI,EAAEvG,CAAC,GAAGnC,SAAS;UACnB4I,GAAG,EAAE,CAAC;UACNlB,KAAK,EAAE,CAAC;UACRC,MAAM,EAAE,MAAM;UACduB,UAAU,EAAE;QAChB;MAAE,GARG,IAAI/G,CAAC,EAAE;QAAAgH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OASf,CACJ,CAAC,EACD,CAAC,GAAGN,KAAK,CAAC9I,UAAU,CAAC,CAAC,CAAC6D,GAAG,CAAC,CAACkF,CAAC,EAAE9G,CAAC,kBAC7BpC,OAAA;QAEIwH,KAAK,EAAE;UACHQ,QAAQ,EAAE,UAAU;UACpBa,GAAG,EAAEzG,CAAC,GAAGnC,SAAS;UAClB0I,IAAI,EAAE,CAAC;UACPf,MAAM,EAAE,CAAC;UACTD,KAAK,EAAE,MAAM;UACbwB,UAAU,EAAE;QAChB;MAAE,GARG,IAAI/G,CAAC,EAAE;QAAAgH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OASf,CACJ,CAAC,EAGD5F,MAAM,CAACa,OAAO,CAAChE,OAAO,CAAC,CAACwD,GAAG,CAAC,CAAC,CAACF,GAAG,EAAE0F,GAAG,CAAC,KAAK;QACzC,IAAI,CAACA,GAAG,CAACxC,MAAM,IAAIwC,GAAG,CAACxC,MAAM,CAAChF,MAAM,KAAK,CAAC,EAAE,OAAO,IAAI;QAEvD,MAAM,CAACkB,EAAE,EAAEE,EAAE,CAAC,GAAGU,GAAG,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC1B,MAAM,CAAC;QAE3C,MAAMmH,KAAK,GAAGD,GAAG,CAACxC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7B,MAAM0C,SAAS,GAAGF,GAAG,CAACvC,OAAO,IAAIuC,GAAG,CAACvC,OAAO,CAACjF,MAAM,GAAG,CAAC;QACvD,MAAM2H,MAAM,GAAGF,KAAK,CAACtC,EAAE,KAAK,MAAM;QAClC,MAAMyC,MAAM,GAAGH,KAAK,CAACtC,EAAE,KAAK,MAAM;QAElC,IAAI0C,OAAO,GAAG,uBAAuB;QAErC,IAAIF,MAAM,EAAE;UACRE,OAAO,GAAG,oBAAoB,CAAC,CAAC;QACpC,CAAC,MAAM,IAAIH,SAAS,IAAIE,MAAM,EAAE;UAC5BC,OAAO,GAAG,oBAAoB,CAAC,CAAC;QACpC,CAAC,MAAM,IAAI,CAACH,SAAS,EAAE;UACnBG,OAAO,GAAG,sBAAsB,CAAC,CAAC;QACtC;QAEA,oBACI7J,OAAA;UAEIwH,KAAK,EAAE;YACHQ,QAAQ,EAAE,UAAU;YACpBW,IAAI,EAAEzF,EAAE,GAAGjD,SAAS;YACpB4I,GAAG,EAAEzF,EAAE,GAAGnD,SAAS;YACnB0H,KAAK,EAAE1H,SAAS;YAChB2H,MAAM,EAAE3H,SAAS;YACjBkJ,UAAU,EAAEU,OAAO;YACnBC,aAAa,EAAE;UACnB;QAAE,GATGhG,GAAG;UAAAsF,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAUX,CAAC;MAEV,CAAC,CAAC,EAGD7I,aAAa,CAACsD,GAAG,CAAC,CAAC;QAAE3B,CAAC;QAAEG;MAAE,CAAC,kBACxBxC,OAAA;QAEIwH,KAAK,EAAE;UACHQ,QAAQ,EAAE,UAAU;UACpBW,IAAI,EAAEtG,CAAC,GAAGpC,SAAS;UACnB4I,GAAG,EAAErG,CAAC,GAAGvC,SAAS;UAClB0H,KAAK,EAAE1H,SAAS;UAChB2H,MAAM,EAAE3H,SAAS;UACjBkJ,UAAU,EAAE,oBAAoB;UAChCW,aAAa,EAAE;QACnB;MAAE,GATG,OAAOzH,CAAC,IAAIG,CAAC,EAAE;QAAA4G,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAUvB,CACJ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD,CAAC,eAGNvJ,OAAA;MAAKwH,KAAK,EAAE;QAAEuC,UAAU,EAAE,EAAE;QAAEpC,KAAK,EAAE;MAAI,CAAE;MAAAD,QAAA,gBACvC1H,OAAA;QAAA0H,QAAA,EAAI;MAAI;QAAA0B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACbvJ,OAAA;QAAQgK,OAAO,EAAEA,CAAA,KAAMzJ,OAAO,CAAC,OAAO,CAAE;QAAAmH,QAAA,EAAC;MAAK;QAAA0B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACvDvJ,OAAA;QAAQgK,OAAO,EAAEA,CAAA,KAAMzJ,OAAO,CAAC,QAAQ,CAAE;QAAAmH,QAAA,EAAC;MAAM;QAAA0B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACzDvJ,OAAA;QAAAoJ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACNvJ,OAAA;QAAAoJ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eAENvJ,OAAA;QACIgK,OAAO,EACH1J,IAAI,KAAK,OAAO,GACVsG,oBAAoB,GACpBW,qBACT;QAAAG,QAAA,EACJ;MAED;QAAA0B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAETvJ,OAAA;QAAQgK,OAAO,EAAEhF,QAAS;QAACwC,KAAK,EAAE;UAAEuC,UAAU,EAAE;QAAG,CAAE;QAAArC,QAAA,EAAC;MAEtD;QAAA0B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAETvJ,OAAA;QACdgK,OAAO,EAAEA,CAAA,KAAM;UACb5I,cAAc,CAAC,EAAE,CAAC;UAClBF,YAAY,CAAC,SAAS,CAAC;UACvBwB,KAAK,CAAC,kCAAkC,CAAC;QAC3C,CAAE;QAAAgF,QAAA,EACH;MAED;QAAA0B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAETvJ,OAAA;QACEgK,OAAO,EAAEA,CAAA,KAAM;UACb,IAAI7I,WAAW,CAACa,MAAM,KAAK,CAAC,EAAE;YAC5BU,KAAK,CAAC,eAAe,CAAC;YACtB;UACF;UAEA,MAAMR,MAAM,GAAG,CACb,UAAU,EACV,MAAM,EACN,OAAO,EACP,OAAO,EACP,QAAQ,CACT;UAED,MAAM+H,SAAS,GAAG9I,WAAW,CAAC6C,GAAG,CAAC,CAACkG,CAAC,EAAE9H,CAAC,KAAK;YAC1C,MAAMC,CAAC,GAAGC,MAAM,CAACC,MAAM,CAAC,GAAGL,MAAM,CAACE,CAAC,CAAC,IAAI,CAAC,CAAC;YAC1C,MAAMI,CAAC,GAAGF,MAAM,CAACC,MAAM,CAAC,GAAGL,MAAM,CAACE,CAAC,CAAC,IAAI,CAAC,CAAC;YAC1C,OAAO;cAAE,GAAG8H,CAAC;cAAE7H,CAAC;cAAEG;YAAE,CAAC;UACvB,CAAC,CAAC;UAEFpB,cAAc,CAAC6I,SAAS,CAAC;UACzB/I,YAAY,CAAC,OAAO,CAAC;QACvB,CAAE;QAAAwG,QAAA,EACH;MAED;QAAA0B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAKOvJ,OAAA;QAAKwH,KAAK,EAAE;UAAEI,MAAM,EAAE,GAAG;UAAEuC,QAAQ,EAAE;QAAO,CAAE;QAAAzC,QAAA,EACzCtC,IAAI,CAACC,SAAS,CAAC;UAAE1D,IAAI,EAAEnB;QAAQ,CAAC,EAAE,IAAI,EAAE,CAAC;MAAC;QAAA4I,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC1C,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEd;AAAClJ,EAAA,CAneQD,GAAG;AAAAgK,EAAA,GAAHhK,GAAG;AAqeZ,eAAeA,GAAG;AAAC,IAAAgK,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}